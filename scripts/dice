#!/usr/bin/env bash

##############################################
#	Author: Nidia Achrys
#	Project: dice
#	Version: 1.0
#
#	Usage: dice [command] [args]
# 
#	Description:
#		Roll some dice!
##############################################

version='1.0'
author='Nidia Achrys'

# Source common script functions
source $SCRIPTS/01-api.sh

#############
# Core Code #
#############

random()
{
	echo $(( 1 + ${RANDOM} % ${1} ))
}

if [ $# -lt 1 ]
then
  PRINT "`SCRIPTNAME`: Type 1 or more numbers after '`SCRIPTNAME`'."
  PRINT "A random number will then be generated from 1 to each."
  exit 1
fi

minoutput=false

for (( i = 1 ; i <= $# ; i++ ))
do
	[[ ${!i} = "-l" ]] && minoutput=true
	[[ ${!i} = "--less" ]] && minoutput=true
done

for (( i = 1 ; i <= $# ; i++ ))
do
	arg=${!i}
	if [[ $arg =~ ^[0-9]+$ ]]
	then
		result="`random ${arg}`"

		if [ ! $minoutput = true ]
		then
			echo -e "d${arg}: ${result}"
		else
			echo -e "${result}"
		fi
	fi
done
