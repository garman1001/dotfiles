#!/usr/bin/env bash

##############################################
#	Author: Nidia Achrys
#	Project: dice
#	Version: 1.0
#
#	Usage: dice [command] [args]
# 
#	Description:
#		Roll some dice!
##############################################

version='1.0'
author='Nidia Achrys'

# Source common script functions
source $SCRIPTS/libs/01-api.sh

#############
# Core Code #
#############

if [ $# -lt 1 ]
then
  api.std.printLn "Type 1 or more numbers after '`api.script.name`'."
  api.std.printLn "A random number will then be generated from 1 to each."
  exit 1
fi

minoutput=false

for (( i = 1 ; i <= $# ; i++ ))
do
	[[ ${!i} = "-l" ]] && minoutput=true
	[[ ${!i} = "--less" ]] && minoutput=true
done

for (( i = 1 ; i <= $# ; i++ ))
do
	arg=${!i}
	if [[ $arg =~ ^[0-9]+$ ]]
	then
		result="`api.std.randomNumber ${arg}`"

		if [ ! $minoutput = true ]
		then
			api.std.printLn "d${arg}: ${result}"
		else
			api.std.printLn "${result}"
		fi
	fi
done
