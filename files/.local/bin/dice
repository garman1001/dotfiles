#!/usr/bin/env bash

##############################################
#	Author: Nidia Achrys
#	Project: dice
#	Version: 1.0
#
#	Usage: dice [command] [args]
# 
#	Description:
#		Roll some dice!
##############################################

PRINT()
{
	printf "%b\n" "${@}"
}

_RANDNUM()
{
	printf "%b" "$(( RANDOM % ${1:-100} + 1 ))"
}

if [ $# -lt 1 ]
then
	PRINT
	PRINT "Generates random numbers\n"
	PRINT
	PRINT "Usage: dice [number...]"
	PRINT "Example: dice 100 50 30 5 2"
	PRINT
	PRINT "Flags:"
	PRINT "-r, --raw\t\tPrint only the numbers"
	PRINT
  exit 1
fi

minoutput=false

for (( i = 1 ; i <= $# ; i++ ))
do
	case ${!i} in

		-r | --raw )

			minoutput=true

	esac
done

for (( i = 1 ; i <= $# ; i++ ))
do
	arg=${!i}
	if [[ $arg =~ ^[0-9]+$ ]]
	then
		result="$(_RANDNUM "${arg}")"

		if [ ! $minoutput = true ]
		then
			PRINT "d${arg}: ${result}"
		else
			PRINT "${result}"
		fi
	fi
done

